# Raspberry Pi 5 WhisperéŸ³å£°èªè­˜ã‚·ã‚¹ãƒ†ãƒ 

ğŸ¤ **Raspberry Pi 5ã§å‹•ä½œã™ã‚‹Whisperã‚’ä½¿ã£ãŸéŸ³å£°èªè­˜ã‚·ã‚¹ãƒ†ãƒ **

5ç§’é–“ã®éŸ³å£°ã‚’éŒ²éŸ³ã—ã¦è‡ªå‹•çš„ã«æ–‡å­—èµ·ã“ã—ã‚’è¡Œã†ã€Raspberry Pi OSæœ€é©åŒ–æ¸ˆã¿ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

## âœ¨ ç‰¹å¾´

- **ğŸ¯ 5ç§’é–“ã®è‡ªå‹•éŒ²éŸ³**: ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§5ç§’é–“éŒ²éŸ³ã—ã€è‡ªå‹•çš„ã«æ–‡å­—èµ·ã“ã—
- **ğŸ‡¯ğŸ‡µ æ—¥æœ¬èªå®Œå…¨å¯¾å¿œ**: Whisper smallãƒ¢ãƒ‡ãƒ«ã§æ—¥æœ¬èªéŸ³å£°ã‚’é«˜ç²¾åº¦ã§èªè­˜
- **âš¡ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†**: Raspberry Pi 5ã®8GBãƒ¡ãƒ¢ãƒªã‚’æ´»ã‹ã—ãŸé«˜é€Ÿå‡¦ç†
- **ğŸ”„ é€£ç¶šéŒ²éŸ³ãƒ¢ãƒ¼ãƒ‰**: é€£ç¶šã—ã¦éŸ³å£°èªè­˜ã‚’å®Ÿè¡Œå¯èƒ½
- **ğŸ”§ éŸ³å£°ãƒ‡ãƒã‚¤ã‚¹ãƒ†ã‚¹ãƒˆ**: ãƒã‚¤ã‚¯ã®å‹•ä½œç¢ºèªã¨ãƒ¬ãƒ™ãƒ«èª¿æ•´æ©Ÿèƒ½ä»˜ã
- **ğŸš€ ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯èµ·å‹•**: ç°¡å˜ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•

## ğŸ–¥ï¸ å¿…è¦ãªç’°å¢ƒ

- **ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢**: Raspberry Pi 5 (8GBæ¨å¥¨)
- **OS**: Raspberry Pi OS (64-bitæ¨å¥¨)
- **ãƒã‚¤ã‚¯**: USBæ¥ç¶šãƒã‚¤ã‚¯ã¾ãŸã¯Piç”¨ãƒã‚¤ã‚¯ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: æœ€ä½8GB (Whisperãƒ¢ãƒ‡ãƒ«ä¿å­˜ç”¨)

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ¨å¥¨ï¼‰

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/deforu/kokusimen.git
cd kokusimen

# ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆ10-15åˆ†ç¨‹åº¦ï¼‰
chmod +x setup.sh
./setup.sh
```

### 2. ç°¡å˜èµ·å‹•

```bash
# ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ èµ·å‹•
./run_whisper.sh

# ã¾ãŸã¯éŸ³å£°ãƒ†ã‚¹ãƒˆ
./test_audio.sh
```

## ğŸ“‹ è©³ç´°ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### ã‚¹ãƒ†ãƒƒãƒ—1: ã‚·ã‚¹ãƒ†ãƒ æº–å‚™

```bash
# ã‚·ã‚¹ãƒ†ãƒ æ›´æ–°
sudo apt update && sudo apt upgrade -y

# å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¢ºèª
sudo apt install git curl
```

### ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

```bash
# ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd ~

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/deforu/kokusimen.git
cd kokusimen
```

### ã‚¹ãƒ†ãƒƒãƒ—3: ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Ÿè¡Œ

```bash
# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œå¯èƒ½ã«ã™ã‚‹
chmod +x setup.sh

# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Ÿè¡Œï¼ˆè©³ç´°ãƒ­ã‚°ä»˜ãï¼‰
./setup.sh
```

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ä»¥ä¸‹ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™ï¼š

- âœ… å¿…è¦ãªã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- âœ… Pythonä»®æƒ³ç’°å¢ƒã®ä½œæˆ
- âœ… å¿…è¦ãªPythonãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- âœ… éŸ³å£°ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®š
- âœ… Whisperãƒ¢ãƒ‡ãƒ«ã®äº‹å‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- âœ… å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ
- âœ… ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã®ä½œæˆ

### ã‚¹ãƒ†ãƒƒãƒ—4: éŸ³å£°ãƒ‡ãƒã‚¤ã‚¹ç¢ºèª

```bash
# éŸ³å£°ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§ç¢ºèª
./test_audio.sh
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

1. **ç°¡å˜èµ·å‹•**ï¼ˆæ¨å¥¨ï¼‰
   ```bash
   ./run_whisper.sh
   ```

2. **æ‰‹å‹•èµ·å‹•**
   ```bash
   source whisper_env/bin/activate
   python3 src/whisper_voice_recorder.py
   ```

### ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®æ©Ÿèƒ½

èµ·å‹•ã™ã‚‹ã¨ä»¥ä¸‹ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

```
é¸æŠã—ã¦ãã ã•ã„:
1. 1å›ã ã‘éŒ²éŸ³ãƒ»æ–‡å­—èµ·ã“ã—
2. é€£ç¶šéŒ²éŸ³ãƒ¢ãƒ¼ãƒ‰  
3. çµ‚äº†
```

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: 1å›ã ã‘éŒ²éŸ³ãƒ»æ–‡å­—èµ·ã“ã—
- 5ç§’é–“éŒ²éŸ³ã—ã¦ãã®å ´ã§æ–‡å­—èµ·ã“ã—
- ãƒ†ã‚¹ãƒˆç”¨é€”ã«æœ€é©

#### ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: é€£ç¶šéŒ²éŸ³ãƒ¢ãƒ¼ãƒ‰
- é€£ç¶šã—ã¦éŒ²éŸ³ã¨æ–‡å­—èµ·ã“ã—ã‚’å®Ÿè¡Œ
- `Ctrl+C`ã§çµ‚äº†

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### éŸ³å£°ãŒèªè­˜ã•ã‚Œãªã„å ´åˆ

1. **ãƒã‚¤ã‚¯ã®æ¥ç¶šç¢ºèª**
   ```bash
   # éŸ³å£°ãƒ‡ãƒã‚¤ã‚¹ä¸€è¦§ã‚’ç¢ºèª
   arecord -l
   ```

2. **éŸ³é‡ãƒ¬ãƒ™ãƒ«ã®ç¢ºèª**
   ```bash
   # éŸ³å£°ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§éŸ³é‡ç¢ºèª
   ./test_audio.sh
   ```

3. **ãƒã‚¤ã‚¯ã®éŸ³é‡èª¿æ•´**
   ```bash
   # ALSAãƒŸã‚­ã‚µãƒ¼ã§éŸ³é‡èª¿æ•´
   alsamixer
   ```

### PulseAudioã®å•é¡Œ

```bash
# PulseAudioã‚’å†èµ·å‹•
pulseaudio --kill
pulseaudio --start

# ã¾ãŸã¯
sudo systemctl restart pulseaudio
```

### ãƒ¡ãƒ¢ãƒªä¸è¶³ã®å ´åˆ

```bash
# ã‚¹ãƒ¯ãƒƒãƒ—ã‚µã‚¤ã‚ºã‚’å¢—ã‚„ã™
sudo dphys-swapfile swapoff
sudo nano /etc/dphys-swapfile
# CONF_SWAPSIZE=2048 ã«å¤‰æ›´
sudo dphys-swapfile setup
sudo dphys-swapfile swapon
```

### å‡¦ç†ãŒé‡ã„å ´åˆ

Whisperãƒ¢ãƒ‡ãƒ«ã‚’è»½é‡ç‰ˆã«å¤‰æ›´ï¼š

```python
# src/whisper_voice_recorder.py ã®73è¡Œç›®ä»˜è¿‘
self.model = whisper.load_model("base")  # smallã‹ã‚‰baseã«å¤‰æ›´
# ã¾ãŸã¯
self.model = whisper.load_model("tiny")  # ã‚ˆã‚Šè»½é‡
```

## âš™ï¸ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### éŒ²éŸ³æ™‚é–“ã®å¤‰æ›´

`src/whisper_voice_recorder.py`ã®`RECORD_SECONDS`ã‚’å¤‰æ›´:

```python
self.RECORD_SECONDS = 10  # 10ç§’ã«å¤‰æ›´
```

### ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆã®å¤‰æ›´

```python
self.RATE = 44100  # 44.1kHzã«å¤‰æ›´ï¼ˆé«˜éŸ³è³ªï¼‰
```

### Whisperãƒ¢ãƒ‡ãƒ«ã®é¸æŠ

ä½¿ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«: `tiny`, `base`, `small`, `medium`, `large`

```python
self.model = whisper.load_model("base")  # ãŠå¥½ã¿ã®ãƒ¢ãƒ‡ãƒ«ã«å¤‰æ›´
```

## ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### Raspberry Pi 5ã§ã®æ¨å¥¨è¨­å®š

1. **GPUãƒ¡ãƒ¢ãƒªåˆ†å‰²**
   ```bash
   sudo raspi-config
   # Advanced Options > Memory Split > 128MB
   ```

2. **CPUãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¢ãƒ¼ãƒ‰**
   ```bash
   # ä¸€æ™‚çš„ã«è¨­å®š
   echo performance | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor
   
   # æ°¸ç¶šçš„ã«è¨­å®š
   echo 'echo performance | sudo tee /sys/devices/system/cpu/cpu*/cpufreq/scaling_governor' | sudo tee -a /etc/rc.local
   ```

## ğŸƒâ€â™‚ï¸ è‡ªå‹•èµ·å‹•è¨­å®š

### systemdã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦ç™»éŒ²

```bash
# ã‚µãƒ¼ãƒ“ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
sudo cp whisper-recorder.service /etc/systemd/system/

# ãƒ‘ã‚¹ã‚’ç·¨é›†ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
sudo nano /etc/systemd/system/whisper-recorder.service

# ã‚µãƒ¼ãƒ“ã‚¹ã‚’æœ‰åŠ¹åŒ–
sudo systemctl enable whisper-recorder
sudo systemctl start whisper-recorder

# ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç¢ºèª
sudo systemctl status whisper-recorder
```

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
kokusimen/
â”œâ”€â”€ setup.sh                    # è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ run_whisper.sh              # ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ èµ·å‹•ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ test_audio.sh               # éŸ³å£°ãƒ†ã‚¹ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ requirements.txt            # Pythonä¾å­˜é–¢ä¿‚
â”œâ”€â”€ whisper-recorder.service    # systemdã‚µãƒ¼ãƒ“ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ whisper_voice_recorder.py  # ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ 
â”‚   â””â”€â”€ audio_test.py              # éŸ³å£°ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«
â””â”€â”€ README.md                   # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸ› ãƒ­ã‚°ã¨ãƒ‡ãƒãƒƒã‚°

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ­ã‚°ã®ç¢ºèª

```bash
# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ™‚ã®ãƒ­ã‚°ã‚’ç¢ºèª
cat setup.log
```

### å®Ÿè¡Œæ™‚ã®ãƒ‡ãƒãƒƒã‚°

```bash
# è©³ç´°ãªãƒ‡ãƒãƒƒã‚°æƒ…å ±ä»˜ãã§å®Ÿè¡Œ
source whisper_env/bin/activate
python3 -v src/whisper_voice_recorder.py
```

## ğŸ’¡ ä½¿ç”¨ä¾‹

### åŸºæœ¬çš„ãªæµã‚Œ

1. `./run_whisper.sh` ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ èµ·å‹•
2. ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã§ã€Œ1ã€ã‚’é¸æŠ
3. ã€ŒéŒ²éŸ³é–‹å§‹...ã€ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å¾Œã€5ç§’é–“è©±ã™
4. æ–‡å­—èµ·ã“ã—çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹

### å®Ÿè¡Œä¾‹

```bash
$ ./run_whisper.sh
WhisperéŸ³å£°èªè­˜ã‚·ã‚¹ãƒ†ãƒ ã‚’èµ·å‹•ä¸­...
ä»®æƒ³ç’°å¢ƒã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ™ãƒ¼ãƒˆã—ã¾ã—ãŸ
Raspberry Pi 5 WhisperéŸ³å£°èªè­˜ã‚·ã‚¹ãƒ†ãƒ 
==================================================

é¸æŠã—ã¦ãã ã•ã„:
1. 1å›ã ã‘éŒ²éŸ³ãƒ»æ–‡å­—èµ·ã“ã—
2. é€£ç¶šéŒ²éŸ³ãƒ¢ãƒ¼ãƒ‰
3. çµ‚äº†
é¸æŠ (1-3): 1

éŒ²éŸ³é–‹å§‹... 5ç§’é–“éŒ²éŸ³ã—ã¾ã™
éŒ²éŸ³é–‹å§‹æ™‚åˆ»: 14:30:25
æ®‹ã‚Š 4 ç§’...
æ®‹ã‚Š 3 ç§’...
æ®‹ã‚Š 2 ç§’...
æ®‹ã‚Š 1 ç§’...
éŒ²éŸ³å®Œäº†
æ–‡å­—èµ·ã“ã—ä¸­...

=== æ–‡å­—èµ·ã“ã—çµæœ ===
ãƒ†ã‚­ã‚¹ãƒˆ: ã“ã‚“ã«ã¡ã¯ã€ä»Šæ—¥ã¯ã„ã„å¤©æ°—ã§ã™ã­ã€‚
æ™‚åˆ»: 2025-08-20 14:30:30
==============================
```

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ¤ è²¢çŒ®

ãƒã‚°å ±å‘Šã‚„æ©Ÿèƒ½è¦æœ›ã¯ã€GitHubã®Issueã§ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚

## ğŸ“š å‚è€ƒè³‡æ–™

- [OpenAI Whisper](https://github.com/openai/whisper)
- [Raspberry Pi Documentation](https://www.raspberrypi.org/documentation/)
- [PyAudio Documentation](https://people.csail.mit.edu/hubert/pyaudio/)

## ğŸ”– ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´

- **v1.0.0** - åˆå›ãƒªãƒªãƒ¼ã‚¹
  - 5ç§’éŒ²éŸ³æ©Ÿèƒ½
  - Whisper smallãƒ¢ãƒ‡ãƒ«å¯¾å¿œ
  - é€£ç¶šéŒ²éŸ³ãƒ¢ãƒ¼ãƒ‰
  - éŸ³å£°ãƒ‡ãƒã‚¤ã‚¹ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½